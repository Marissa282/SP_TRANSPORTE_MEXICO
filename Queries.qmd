---
title: "Redes multinomiales"
author: "Marissa"
format:
   html:
     toc: true
     html-math-method: katex
     embed-resources: true 
     self-contained-math: true
     df-print: kable
editor: source
---

✏️ Construyan las variables que necesiten para dar respuesta a las queries asignadas. Si es necesario discreticen las variables continuas involucradas.

```{r}
library(reticulate)
use_condaenv("base", required = TRUE)

```

```{python}
import pandas as pd 
```

```{python}
viajes=pd.read_csv("/Users/marissaluna/Documents/SP_TRANSPORTE/data/eod_2017_csv/tviaje_eod2017/conjunto_de_datos/tviaje.csv")
transportes= pd.read_csv("/Users/marissaluna/Documents/SP_TRANSPORTE/data/eod_2017_csv/ttransporte_eod2017/conjunto_de_datos/ttransporte.csv")
```

```{python}
viajes.head()
```

```{python}
transportes.head()
```

```{python}
df_joined = pd.merge(viajes, transportes, on = "id_via", how = "inner")
```


```{python}
vars_= ["id_via","id_tra", "estrato_x","p5_3_x","p5_6","p5_9_1","p5_9_2","p5_10_1","p5_10_2","p5_13","p5_14","p5_14_16" ]
df_final= df_joined[vars_]
```

```{python}
df_final.columns = ["id_via", "id_tra", "E", "S", "O","Hora1","Min1", "Hora2","Min2", "P", "T", "bicitaxi"]
```

```{python}
df_final
```

```{python}
df_final["Duracion"]= (df_final["Hora2"]*60 + df_final["Min2"]) - (df_final["Hora1"]*60 + df_final["Min1"])
```

```{python}
df_final["D"]= (df_final["Duracion"] > 60).astype(int)
#>60 = 1, <=60 = 0 
```

```{python}

df_finalisimo = df_final[["id_via", "id_tra","E","S","O","P","T","D","bicitaxi"]]
```

```{python}
df_finalisimo
```
✏️ Propongan al menos 3 diferentes DAGs que representen las relaciones de dependencia entre todas las variables de interés.

✏️ Construyan una red bayesiana utilizando las DAGs que propusieron previamente.

✏️ Discutan la significancia de las relaciones de dependencia de sus DAGs.

✏️ ¿Cuál es la red que mejor se ajuste a sus datos? ¿Por qué?

✏️ Utilicen el algoritmo hill-climbing para obtener la mejor estructura de la DAG para estos datos.




## Query 1
¿Cuál es la probabilidad de que el viaje del hogar al trabajo dure más de 60 minutos si la persona usa transporte público?

Tablas necesarias: tviajes 

tviajes: 


HOGAR AL TRABAJO 
- p5_6 (Pregunta 5.6 ¿Qué tipo de lugar es el origen de su viaje?) 
- p5_11a (Pregunta 5.11a ¿Qué tipo de lugar fue el destino de su viaje?)
- p5_13 (Pregunta 5.13 ¿Cuál fue el propósito del viaje?)

DURACION DEL VIAJE 
- Pregunta 5.9.¿A qué hora comenzó?
- Pregunta 5.9.¿En qué minuto comenzó?
- Pregunta 5.10 ¿A qué hora terminó?
- Pregunta 5.10 ¿En qué minuto terminó?

ttransporte hacer join en idviaje
TRANSPORTE PUBLICO 
02 Colectivo/Micro
05 Metro
06 Autobús RTP o M1
08 Autobús 
10 Trolebús
11 Metrobús o Mexibús
12 Tren ligero
13 Tren suburbano
15 Mexicable

```{r}

```

## Query 2
¿Cuál es la probabilidad de que un hogar tenga un automóvil propio, dado que la vivienda es propia?


```{r}
#| echo: false
2 * 2
```
## Query 3
¿Cuál es la probabilidad de que el estrato bajo, utilice transporte micro, metro, autobús?

```{r}
#| echo: false
2 * 2
```
##Query 4
¿Cuál es la probabilidad de que una persona viaje entre semana y sea de estrato medio bajo dado que va al trabajo en bicitaxi?
```{r}

```

